<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8" />
  <title><%= pageTitle %></title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <script src="https://cdn.tailwindcss.com"></script>

  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#f97316',   // ORANGE (42%)
            soft: '#fff7ed',
            whitepure: '#ffffff',// WHITE (42%)
            other: '#64748b'      // OTHER (16%)
          },
          boxShadow: {
            soft: '0 20px 45px rgba(0,0,0,0.08)',
            glow: '0 20px 40px rgba(249,115,22,0.45)'
          }
        }
      }
    }
  </script>
</head>

<body class="bg-gradient-to-br from-orange-50 via-whitepure to-orange-100 min-h-screen text-gray-800">

<%- include('partials/header') %>

<main class="max-w-6xl mx-auto px-4 py-20">

<% if (!isLoggedIn) { %>

  <!-- NOT LOGGED IN -->
  <div class="bg-whitepure rounded-[3rem] shadow-soft p-16 text-center">
    <h2 class="text-3xl font-extrabold text-primary mb-4">
      рдЖрдк рд▓реЙрдЧрд┐рди рдирд╣реАрдВ рд╣реИрдВ
    </h2>
    <p class="text-other mb-10">
      рдкреНрд░реЛрдлрд╛рдЗрд▓ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдкрд╣рд▓реЗ рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ
    </p>
    <a href="/login"
       class="inline-block bg-primary text-white px-14 py-4 rounded-2xl font-bold shadow-glow hover:scale-105 transition">
      рд▓реЙрдЧрд┐рди рдХрд░реЗрдВ
    </a>
  </div>

<% } else { %>

<%
  let maskedAadhar = 'рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ';
  if (user.Aadhar_cardNumber) {
    maskedAadhar = 'XXXX XXXX ' + user.Aadhar_cardNumber.slice(-4);
  }
%>

<!-- ================= PROFILE HEADER ================= -->
<div class="relative bg-whitepure rounded-[3.5rem] shadow-soft p-12 mb-20 border border-orange-100 overflow-hidden">

  <div class="absolute -top-24 -right-24 w-72 h-72 bg-orange-200 rounded-full blur-3xl opacity-30"></div>

  <div class="relative flex flex-col md:flex-row md:items-center gap-12">

    <!-- Avatar -->
    <div class="w-32 h-32 rounded-full bg-primary text-white
                flex items-center justify-center text-6xl font-extrabold shadow-glow">
      <%= user.Name.charAt(0).toUpperCase() %>
    </div>

    <!-- Info -->
    <div class="flex-1">
      <h2 class="text-4xl font-extrabold mb-3 text-gray-900">
        <%= user.Name %>
      </h2>

      <span class="inline-block px-6 py-2 rounded-full text-xs font-bold mb-8
        <%= role === 'employer'
          ? 'bg-orange-100 text-primary'
          : 'bg-slate-100 text-slate-700' %>">
        <%= role === 'employer'
          ? 'ЁЯПв рдХрд╛рдо рджреЗрдиреЗ рд╡рд╛рд▓рд╛'
          : 'ЁЯС╖ рдХрд╛рдо рдХрд░рдиреЗ рд╡рд╛рд▓рд╛' %>
      </span>

      <!-- Info cards -->
      <div class="grid sm:grid-cols-2 gap-6">

        <div class="bg-soft rounded-2xl p-6 border border-orange-100">
          <p class="text-xs text-other mb-1">ЁЯУ▒ рдореЛрдмрд╛рдЗрд▓ рдирдВрдмрд░</p>
          <p class="font-bold text-xl"><%= user.Mobile || 'рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ' %></p>
        </div>

        <div class="bg-soft rounded-2xl p-6 border border-orange-100">
          <p class="text-xs text-other mb-1">ЁЯЖФ рдЖрдзрд╛рд░ рдХрд╛рд░реНрдб</p>
          <p class="font-bold tracking-widest text-lg"><%= maskedAadhar %></p>
        </div>

      </div>
    </div>

  </div>
</div>

<!-- ================= WORKER ACCEPTED MESSAGE ================= -->
<% if (role === 'worker' && acceptedJobs && acceptedJobs.length > 0) { %>

<div class="bg-green-50 border-l-8 border-green-600 rounded-[3rem] p-10 mb-16 shadow-soft">

  <h3 class="text-2xl font-extrabold text-green-700 mb-6">
    тЬФ рдЖрдкрдХрд╛ рдХрд╛рдо рд╕реНрд╡реАрдХрд╛рд░ рдХрд░ рд▓рд┐рдпрд╛ рдЧрдпрд╛
  </h3>

  <% acceptedJobs.forEach(job => { %>
    <div class="bg-whitepure rounded-2xl p-6 mb-4 border border-green-100">
      <p class="text-lg font-bold"><%= job.title %></p>
      <p class="text-sm text-other">ЁЯУН <%= job.location %></p>
      <p class="text-green-700 mt-2 font-semibold">
        рдмрдзрд╛рдИ рд╣реЛ! рдЖрдкрдХреЛ рдЗрд╕ рдХрд╛рдо рдХреЗ рд▓рд┐рдП рдЪреБрдирд╛ рдЧрдпрд╛ рд╣реИред
      </p>
      <p class="text-xs text-gray-500 mt-1">
        рдХрд╛рдо рджреЗрдиреЗ рд╡рд╛рд▓рд╛: <%= job.employer?.Name || 'рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ' %>
      </p>
    </div>
  <% }) %>
</div>

<% } %>

<!-- ================= WORKER REJECTED MESSAGE ================= -->
<% if (role === 'worker' && rejectedJobs && rejectedJobs.length > 0) { %>

<div class="bg-orange-50 border-l-8 border-primary rounded-[3rem] p-10 mb-20 shadow-soft">

  <h3 class="text-2xl font-extrabold text-primary mb-6">
    тЭМ рдХрд╛рдо рдЕрд╕реНрд╡реАрдХрд╛рд░ рдХрд┐рдпрд╛ рдЧрдпрд╛
  </h3>

  <% rejectedJobs.forEach(job => { %>
    <div class="bg-whitepure rounded-2xl p-6 mb-4 border border-orange-100">
      <p class="text-lg font-bold"><%= job.title %></p>
      <p class="text-sm text-other">ЁЯУН <%= job.location %></p>
      <p class="text-red-600 mt-2 font-semibold">
        рдпрд╣ рдХрд╛рдо рдЖрдкрдХреЛ рдирд╣реАрдВ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ, рдЖрдк рджреВрд╕рд░рд╛ рдХрд╛рдо рджреЗрдЦ рд╕рдХрддреЗ рд╣реИрдВред
      </p>
      <p class="text-xs text-gray-500 mt-1">
        рдХрд╛рдо рджреЗрдиреЗ рд╡рд╛рд▓рд╛: <%= job.employer?.Name || 'рдЙрдкрд▓рдмреНрдз рдирд╣реАрдВ' %>
      </p>
    </div>
  <% }) %>
</div>

<% } %>

<!-- ================= EMPLOYER DASHBOARD ================= -->
<% if (role === 'employer') { %>

<h3 class="text-3xl font-extrabold mb-10 text-gray-900">
  ЁЯУЛ рдЖрдкрдХреЗ рджреНрд╡рд╛рд░рд╛ рдбрд╛рд▓реЗ рдЧрдП рдХрд╛рдо
</h3>

<div class="space-y-16">

<% postedJobs.forEach(job => { %>

  <div class="bg-whitepure rounded-[3rem] shadow-soft p-10 border border-orange-100">

    <h4 class="text-2xl font-extrabold mb-1">
      <%= job.title %>
    </h4>

    <p class="text-sm text-other mb-6">
      ЁЯУН <%= job.location %>
    </p>

    <div class="text-sm text-primary font-semibold">
      ЁЯСе рдЖрд╡реЗрджрди рдХрд░рдиреЗ рд╡рд╛рд▓реЗ: <%= job.applicants.length %>
    </div>

  </div>

<% }) %>

</div>

<% } %>

<% } %>

</main>
</body>
</html>
